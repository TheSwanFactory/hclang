"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const frames_1 = require("../frames");
const terminate = (source, parameter) => {
    return source.finish(parameter);
};
class Terminal extends frames_1.Frame {
    constructor(data) {
        super(frames_1.NilContext);
        this.data = data;
        this.is.immediate = true;
    }
    static end() { return new Terminal(terminate); }
    ;
    apply(argument, parameter) {
        return this.data(argument, parameter);
    }
    toData() { return this.data; }
}
exports.Terminal = Terminal;
exports.terminals = {};
const perform = (actions) => {
    return (source, parameter) => {
        return source.perform(actions);
    };
};
const addTerminal = (char, key) => {
    const action = {};
    action[key] = frames_1.FrameSymbol.for(char);
    exports.terminals[char] = new Terminal(perform(action));
};
function addGroup(grouper) {
    const sample = new grouper([], frames_1.NilContext);
    const open = sample.string_open();
    const close = sample.string_close();
    exports.terminals[open] = new Terminal(perform({ push: grouper }));
    exports.terminals[close] = new Terminal(perform({ pop: grouper }));
}
exports.terminals[frames_1.Frame.kEND] = Terminal.end();
exports.terminals["\n"] = new Terminal(perform({ end: frames_1.FrameSymbol.for("\n") }));
exports.terminals["("] = new Terminal(perform({ push: frames_1.FrameExpr }));
exports.terminals[")"] = new Terminal(perform({ pop: frames_1.FrameExpr }));
exports.terminals["["] = new Terminal(perform({ push: frames_1.FrameArray }));
exports.terminals["]"] = new Terminal(perform({ pop: frames_1.FrameArray }));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVybWluYWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2V4ZWN1dGUvdGVybWluYWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQThHO0FBVTlHLE1BQU0sU0FBUyxHQUFtQixDQUFDLE1BQWEsRUFBRSxTQUFnQixFQUFFLEVBQUU7SUFDcEUsT0FBUSxNQUFrQixDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMvQyxDQUFDLENBQUM7QUFFRixNQUFhLFFBQVMsU0FBUSxjQUFLO0lBR2pDLFlBQXNCLElBQW9CO1FBQ3hDLEtBQUssQ0FBQyxtQkFBVSxDQUFDLENBQUM7UUFERSxTQUFJLEdBQUosSUFBSSxDQUFnQjtRQUV4QyxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7SUFDM0IsQ0FBQztJQUxNLE1BQU0sQ0FBQyxHQUFHLEtBQUssT0FBTyxJQUFJLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFBQSxDQUFDO0lBT2pELEtBQUssQ0FBQyxRQUFlLEVBQUUsU0FBZ0I7UUFDNUMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRVMsTUFBTSxLQUFVLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Q0FDOUM7QUFiRCw0QkFhQztBQUVZLFFBQUEsU0FBUyxHQUFZLEVBQ2pDLENBQUM7QUFFRixNQUFNLE9BQU8sR0FBRyxDQUFDLE9BQWdCLEVBQUUsRUFBRTtJQUNuQyxPQUFPLENBQUMsTUFBYSxFQUFFLFNBQWdCLEVBQUUsRUFBRTtRQUN6QyxPQUFRLE1BQXFCLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2pELENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLE1BQU0sV0FBVyxHQUFHLENBQUMsSUFBWSxFQUFFLEdBQVcsRUFBRSxFQUFFO0lBQ2hELE1BQU0sTUFBTSxHQUFZLEVBQUUsQ0FBQztJQUMzQixNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsb0JBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDcEMsaUJBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNsRCxDQUFDLENBQUM7QUFFRixTQUFTLFFBQVEsQ0FBQyxPQUEwQjtJQUMxQyxNQUFNLE1BQU0sR0FBRyxJQUFJLE9BQU8sQ0FBQyxFQUFFLEVBQUUsbUJBQVUsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNsQyxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDcEMsaUJBQVMsQ0FBQyxJQUFJLENBQUMsR0FBSSxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFELGlCQUFTLENBQUMsS0FBSyxDQUFDLEdBQUksSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUMsR0FBRyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUMsQ0FBQztBQUM1RCxDQUFDO0FBRUQsaUJBQVMsQ0FBQyxjQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ3ZDLGlCQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUMsR0FBRyxFQUFFLG9CQUFXLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RFLGlCQUFTLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUMsSUFBSSxFQUFFLGtCQUFTLEVBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUQsaUJBQVMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBQyxHQUFHLEVBQUUsa0JBQVMsRUFBQyxDQUFDLENBQUMsQ0FBQztBQUN6RCxpQkFBUyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFDLElBQUksRUFBRSxtQkFBVSxFQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNELGlCQUFTLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUMsR0FBRyxFQUFFLG1CQUFVLEVBQUMsQ0FBQyxDQUFDLENBQUMifQ==